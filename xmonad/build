#!/usr/bin/env bash

set -e

TEMP_DIR="$(mktemp -d /tmp/xmonad-build-XXXXXXXXXX)"
trap 'rm -r $TEMP_DIR' exit

cd "$XDG_CONFIG_HOME/xmonad"

cabal build exe:xmonad -O2
cp "$(cabal list-bin exe:xmonad)" "$TEMP_DIR/xmonad"
mv "$TEMP_DIR/xmonad" "$1"
